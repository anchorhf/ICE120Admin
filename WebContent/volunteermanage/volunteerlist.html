<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>志愿者管理</title>
<link rel="stylesheet" type="text/css" href="../css/easyui.css">
<link rel="stylesheet" type="text/css" href="../css/icon.css">
<link rel="stylesheet" type="text/css" href="../css/color.css">
<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="../css/app.css">
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery.easyui.min.js"></script>
<script type="text/javascript" src="../js/locale/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>


</head>
<body>
	<table id="volunteerlist" title="志愿者申请列表" class="easyui-datagrid">
		<thead>
			<tr>
				<th data-options="field:'id',width:'4%'">编码</th>
				<th data-options="field:'volunteer' ,width: '7%'">志愿者</th>
				<th data-options="field:'area' ,width: '9%'">申请地区</th>
				<th data-options="field:'institution' ,width: '9%'">申请机构</th>
				<th data-options="field:'volunteertype' ,width: '6%'">志愿者类型</th>
				<th data-options="field:'validperiod' ,width: '11%'">有效期限</th>
				<th data-options="field:'applystatename' ,width: '9%'">申请状态</th>
				<th data-options="field:'skill' ,width: '9%'">技能</th>
				<th data-options="field:'applytime' ,width: '11%'">申请时刻</th>
				<th data-options="field:'checktime' ,width: '11%'">审核时刻</th>
				<th data-options="field:'checkperson' ,width: '6%'">审核人</th>
			</tr>
		</thead>
	</table>
	<div id="toolbar">
		<div data-options="region:'north',split:true">
			<table style="width: 100%;" border="0" cellspacing="0"
				cellpadding="0">
				<tr>
					<td align="right">申请开始时刻：</td>
					<td><input class="easyui-datetimebox" style="width: 142px"
						id="startTime" data-options="editable: false"></td>
					<td align="right">申请终止时刻：</td>
					<td><input class="easyui-datetimebox" style="width: 142px"
						id="endTime" data-options="editable: false"></td>
					<td align="right">申请地区：</td>
					<td><input class="easyui-textbox" type="text"
						style="width: 130px" id="area"></td>

					<td align="right">申请机构：</td>
					<td><input class="easyui-textbox" type="text"
						style="width: 120px" id="institution"></td>
					<td>&nbsp;</td>
				</tr>
				<tr>
					<td align="right">志愿者类型：</td>
					<td><select class="easyui-combobox" style="width: 140px"
						id="volunteertype" data-options="editable: false,panelHeight: 'auto'">
						<option value="-1">--请选择--</option>
                        <option value="1">AED</option>
                        <option value="2">担架员</option>
						</select></td>
					<td align="right">志愿者：</td>
					<td><input class="easyui-textbox" type="text"
						style="width: 140px" id="volunteer"></td>
					<td align="right">申请状态：</td>
					<td><select class="easyui-combobox" style="width: 130px"
						id="applystate" data-options="editable: false,panelHeight: 'auto'">
						<option value="-1">--请选择--</option>
                        <option value="0">待审核</option>
                        <option value="1">审核通过</option>
                        <option value="2">审核不通过</option>
						</select>
					</td>
					<td align="right">技能：</td>
					<td><input class="easyui-textbox" type="text"
						style="width: 120px" id="skill"></td>
					<td>&nbsp;</td>
					<td><a href="javascript:void(0)" id="btnSearch"
						class="easyui-linkbutton" onclick="reSearch()"
						data-options="iconCls:'icon-search'">查询</a></td>
				</tr>
				
			</table>
		</div>
		<div>
			<a href="javascript:void(0)" class="easyui-linkbutton"
				iconCls="icon-add" plain="true" onclick="addCenter()">审核通过</a> <a
				href="javascript:void(0)" class="easyui-linkbutton"
				iconCls="icon-edit" plain="true" onclick="editCenter()">审核不通过</a>
		</div>
	</div>

	<script type="text/javascript">
		var reSearch = function() {
			$("#volunteerlist").datagrid({
                    pageNumber: 1,
                    queryParams: {
    					applybegintime : $("#startTime").datetimebox('getValue'),
    					applyendtime : $('#endTime').datetimebox('getValue'),
    					area : $('#area').val(),
    					institution : $('#institution').val(),
    					volunteertype : $('#volunteertype').combobox('getValue'),
    					volunteer : $('#volunteer').val(),
    					applystate : $('#applystate').combobox('getValue')
                    }
			});
		};
		$(document).ready(function() {
			
			$('#startTime').datetimebox('setValue', '2016-04-01 08:00:00');
            $('#endTime').datetimebox('setValue', '2016-12-01 08:00:00');
			//#region
			/* EUIcombobox("#volunteertype", {
                url: '/Medical/GetAlarmEventType")',
                valueField: 'ID',
                textField: 'Name',
                editable: false,
                panelHeight: 'auto',
                OneOption: [{
                    ID: "",
                    Name: "--请选择--"
                }]
            }); */
            //#endregion
			
			$("#volunteerlist").datagrid({
				url : '/api/VolunteerApply/list',
				method : 'POST',
				pageSize : 20,
				pagination : true,
				fit : true,//自动大小
				toolbar : "#toolbar",
				rownumbers : true,//行号
				singleSelect : true,
				queryParams : {
					applybegintime : $("#startTime").datetimebox('getValue'),
					applyendtime : $('#endTime').datetimebox('getValue'),
					area : $('#area').val(),
					institution : $('#institution').val(),
					volunteertype : $('#volunteertype').combobox('getValue'),
					volunteer : $('#volunteer').val(),
					applystate : $('#applystate').combobox('getValue')
				},
				rowStyler : function(index, row) {
					/* if (row.machinestatus == "正常")
						return 'color:blue;';
					if (row.machinestatus == "故障")
						return 'color:red;';
					return ''; */
				},
				onDblClickRow : function(rowIndex, rowData) {
					
				}
			});
			//设置分页控件 
			var p = $('#volunteerlist').datagrid('getPager');
			$(p).pagination({
				pageSize : 15,//每页显示的记录条数，默认为10 
				pageList : [ 10, 15, 20, 30 ],//可以设置每页记录条数的列表 
				beforePageText : '第',//页数文本框前显示的汉字 
				afterPageText : '页    共 {pages} 页',
				displayMsg : '当前显示 {from} - {to} 条记录   共 {total} 条记录',
			});

		});
	</script>
</body>
</html>